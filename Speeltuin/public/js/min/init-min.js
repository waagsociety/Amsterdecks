function init(){Object.keys(fieldSets).forEach(function(e){var t=document.getElementById("sideContainer"),i=document.createElement("a");i.innerHTML=e,i.href="#"+e,i.classList.add("btn","btn-1","btn-1a"),i.setAttribute("data-setname",e),i.onclick=function(e){return e.preventDefault(),loadField(fieldSets[this.dataset.setname]),!1},t.appendChild(i)})}function loadField(e){var t=document.getElementById("map");e.path="/public/fields/",fieldsLoader(e,function(i,n){if(console.log(i||"starting field system"),i)throw i;var o={width:$(t).innerWidth(),height:$(t).innerHeight()},d={width:e.x,height:e.y,fields:n,timePassing:!0},a=$(t).innerWidth()/$(t).innerHeight(),l=d.width/d.height,h=l>a,r=h?$(t).innerHeight()/d.height:$(t).innerWidth()/d.width,s=new MotionDisplay({debugField:!1,background:"rgba(11,41,91,"+trailLenght+")",gridOptions:d,width:Math.floor(d.width*r),height:Math.floor(d.height*r),clipPath:clipPaths[e.setName]});window.md=s,initMotionDisplayControls(s),initVariationControls(s),t.appendChild(s.canvas),s.canvas.style.width=Math.floor(d.width*r)+"px",s.canvas.style.height=Math.floor(d.height*r)+"px",document.addEventListener("keyup",function(e){return console.log(e.keyCode),13===e.keyCode?void(s.debugField?(s.debugField=!1,s.start()):(s.debugField=!0,s.running=!1)):86===e.keyCode?void s.grid.nextVariant():84===e.keyCode?void s.grid.nextTime():void(80===e.keyCode&&s.grid.toggleTimePassing())}),$(s.canvas).on("click",function(e){console.log(s.grid.getLocalV({x:e.offsetX,y:e.offsetY})),console.log(s.grid.getLocalV({x:e.offsetX+Math.random(),y:e.offsetY+Math.random()}))})})}$(document).ready(init);