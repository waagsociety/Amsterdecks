function init(){var i=document.getElementById("map");fieldsLoader({path:"/public/fields/"},function(t,e){if(console.log(t||"starting field system"),t)throw t;var o={width:window.exportX,height:window.exportY,fields:e,timePassing:!0},n=$(i).innerWidth()/$(i).innerHeight(),d=o.width/o.height,a=d>n,h=a?$(i).innerHeight()/o.height:$(i).innerWidth()/o.width,r=new MotionDisplay({background:"rgba(11,41,91,"+trailLenght+")",gridOptions:o,width:Math.floor(o.width*h),height:Math.floor(o.height*h),clipPath:window.clipPath});window.md=r,initMotionDisplayControls(r),initVariationControls(r),i.appendChild(r.canvas),r.canvas.style.width=Math.floor(o.width*h)+"px",r.canvas.style.height=Math.floor(o.height*h)+"px",document.addEventListener("keyup",function(i){return console.log(i.keyCode),13===i.keyCode?void(r.debugField?(r.debugField=!1,r.start()):(r.debugField=!0,r.running=!1)):86===i.keyCode?void r.grid.nextVariant():84===i.keyCode?void r.grid.nextTime():void(80===i.keyCode&&r.grid.toggleTimePassing())}),$(r.canvas).on("click",function(i){console.log(r.grid.getLocalV({x:i.offsetX,y:i.offsetY})),console.log(r.grid.getLocalV({x:i.offsetX+Math.random(),y:i.offsetY+Math.random()}))})})}$(document).ready(init);